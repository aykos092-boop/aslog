# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:

1. ‚úÖ **SQL –º–∏–≥—Ä–∞—Ü–∏—è** —Å–æ–∑–¥–∞–Ω–∞ (`20260201130000_documents_system.sql`)
2. ‚úÖ **Supabase —Ñ—É–Ω–∫—Ü–∏—è** —Å–æ–∑–¥–∞–Ω–∞ (`documents-pdf`)
3. ‚úÖ **React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** —Å–æ–∑–¥–∞–Ω (`DocumentsManager.tsx`)
4. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Admin** –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
5. ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é

**–û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `eqrzodfukdnwsogjzmoz`
3. –û—Ç–∫—Ä–æ–π—Ç–µ: **SQL Editor**
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞: `supabase/migrations/20260201130000_documents_system.sql`
5. –ù–∞–∂–º–∏—Ç–µ **Run**

### 2. –°–æ–∑–¥–∞—Ç—å Storage Bucket

**–í Supabase Dashboard:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Storage**
2. –ù–∞–∂–º–∏—Ç–µ **New bucket**
3. –ò–º—è: `documents`
4. Public: **false** (–≤–∞–∂–Ω–æ!)
5. –ù–∞–∂–º–∏—Ç–µ **Save**

### 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Supabase CLI:**
```bash
npx supabase login
npx supabase link --project-ref eqrzodfukdnwsogjzmoz
npx supabase functions deploy documents-pdf
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ Dashboard:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Edge Functions**
2. –ù–∞–∂–º–∏—Ç–µ **New function**
3. –ò–º—è: `documents-pdf`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑: `supabase/functions/documents-pdf/index.ts`
5. –ù–∞–∂–º–∏—Ç–µ **Deploy**

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:**
```bash
node test-documents-function.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Documents table exists
‚úÖ Document types available
‚úÖ Documents storage bucket exists
‚úÖ Test document created
‚úÖ Test document cleaned up
```

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
   ```bash
   npm run dev
   ```

2. **–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ admin:**
   - Email: –≤–∞—à admin email
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å

3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Admin Panel:**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å
   - –í—ã–±–µ—Ä–∏—Ç–µ "Admin Panel"

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "Documents":**
   - –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π üìÑ
   - –ü–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## üìÑ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –í Admin Panel:

- üìã **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
- üîç **–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É/–Ω–∞–∑–≤–∞–Ω–∏—é**
- üè∑Ô∏è **–§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –∏ —Å—Ç–∞—Ç—É—Å—É**
- üëÅÔ∏è **–î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä**
- üì• **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF**
- üîÑ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF**

### –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
- üì¶ **Order Confirmation** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- üöö **Shipping Manifest** - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è
- üì• **Receiving Report** - –û—Ç—á–µ—Ç –æ –ø—Ä–∏–µ–º–∫–µ
- üìä **Inventory Report** - –ò–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—ã–π –æ—Ç—á–µ—Ç
- üè≠ **Warehouse Receipt** - –°–∫–ª–∞–¥—Å–∫–∞—è –∫–≤–∏—Ç–∞–Ω—Ü–∏—è
- üì¨ **Delivery Note** - –î–æ—Å—Ç–∞–≤–∫–∞
- üí∞ **Invoice** - –°—á–µ—Ç
- üìã **Customs Declaration** - –¢–∞–º–æ–∂–µ–Ω–Ω–∞—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- **Admin**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- **–ö–ª–∏–µ–Ω—Ç—ã**: –¢–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
- **–ü–µ—Ä–µ–≤–æ–∑—á–∏–∫–∏**: –¢–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–≤–æ–∏—Ö —Å–¥–µ–ª–æ–∫
- **WMS –ø–µ—Ä—Å–æ–Ω–∞–ª**: –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
documents/
‚îú‚îÄ‚îÄ 2024/
‚îÇ   ‚îú‚îÄ‚îÄ order_confirmation/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ORD/2024/000001.pdf
‚îÇ   ‚îú‚îÄ‚îÄ shipping_manifest/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SHP/2024/000001.pdf
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ 2025/
    ‚îî‚îÄ‚îÄ ...
```

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
   ```sql
   SELECT * FROM documents LIMIT 1;
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ storage:**
   ```sql
   SELECT * FROM storage.buckets WHERE name = 'documents';
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:**
   ```sql
   SELECT * FROM pg_proc WHERE proname = 'generate_document_number';
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```sql
   SELECT * FROM user_roles WHERE role = 'admin';
   ```

---

**–ì–æ—Ç–æ–≤–æ! üéâ –°–∏—Å—Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏.**
