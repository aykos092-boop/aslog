<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–æ–∑–¥–∞–Ω–∏–µ –ê–¥–º–∏–Ω–∞ - Swift Ship Connect</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            background: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        button:hover {
            background: #0056b3;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê –°–æ–∑–¥–∞–Ω–∏–µ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
        
        <div class="info">
            <strong>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong><br>
            –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ Swift Ship Connect.
        </div>

        <form id="adminForm">
            <div class="form-group">
                <label for="email">Email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</label>
                <input type="email" id="email" value="admin@swiftship.uz" required>
            </div>
            
            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="password" value="admin123456" required>
            </div>
            
            <button type="submit">üöÄ –°–æ–∑–¥–∞—Ç—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
        </form>

        <div id="result" class="result"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    
    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const firebaseConfig = {
            apiKey: "AIzaSyBuht58TZusVJm4do47LSooBWBGSZErsS8",
            authDomain: "asialog-2aa38.firebaseapp.com",
            projectId: "asialog-2aa38",
            storageBucket: "asialog-2aa38.firebasestorage.app",
            messagingSenderId: "472239170057",
            appId: "1:472239170057:web:c5267f425f2ab661520ed8",
            measurementId: "G-VZWR0QP89W"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        document.getElementById('adminForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const resultDiv = document.getElementById('result');
            
            try {
                console.log('üî• –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞...');
                console.log('üìß Email:', email);
                
                // –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                resultDiv.className = 'result success';
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <h3>‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h3>
                    <p><strong>üë§ UID:</strong> ${user.uid}</p>
                    <p><strong>üìß Email:</strong> ${user.email}</p>
                    <p><strong>üîê –ü–∞—Ä–æ–ª—å:</strong> ${password}</p>
                    <hr>
                    <h4>üéâ –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É:</h4>
                    <p><strong>üåê –ê–¥—Ä–µ—Å:</strong> <a href="http://localhost:8081/admin" target="_blank">http://localhost:8081/admin</a></p>
                    <p><strong>üìß Email:</strong> ${email}</p>
                    <p><strong>üîê –ü–∞—Ä–æ–ª—å:</strong> ${password}</p>
                    <hr>
                    <h4>‚ö†Ô∏è –í–∞–∂–Ω–æ:</h4>
                    <p>1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–∞–¥–µ–∂–Ω–æ–º –º–µ—Å—Ç–µ</p>
                    <p>2. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å "admin" –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase</p>
                    <p>3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–æ–ª—å—é "admin" —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ user_roles</p>
                `;
                
            } catch (error) {
                if (error.code === 'auth/email-already-in-use') {
                    console.log('‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–±—É–µ–º –≤–æ–π—Ç–∏...');
                    
                    try {
                        const userCredential = await auth.signInWithEmailAndPassword(email, password);
                        resultDiv.className = 'result success';
                        resultDiv.style.display = 'block';
                        resultDiv.innerHTML = `
                            <h3>‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã–π!</h3>
                            <p><strong>üë§ UID:</strong> ${userCredential.user.uid}</p>
                            <p><strong>üìß Email:</strong> ${userCredential.user.email}</p>
                            <hr>
                            <h4>üéâ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:</h4>
                            <p><strong>üåê –ê–¥—Ä–µ—Å:</strong> <a href="http://localhost:8081/admin" target="_blank">http://localhost:8081/admin</a></p>
                            <p><strong>üìß Email:</strong> ${email}</p>
                            <p><strong>üîê –ü–∞—Ä–æ–ª—å:</strong> ${password}</p>
                            <hr>
                            <h4>‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç –≤ –∞–¥–º–∏–Ω–∫—É:</h4>
                            <p>1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å —Ä–æ–ª—å "admin" –≤ Supabase</p>
                            <p>2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL: <code>INSERT INTO user_roles (user_id, role) VALUES ('${userCredential.user.uid}', 'admin');</code></p>
                        `;
                    } catch (signInError) {
                        resultDiv.className = 'result error';
                        resultDiv.style.display = 'block';
                        resultDiv.innerHTML = `
                            <h3>‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞</h3>
                            <p><strong>–û—à–∏–±–∫–∞:</strong> ${signInError.message}</p>
                            <hr>
                            <h4>üí° –†–µ—à–µ–Ω–∏—è:</h4>
                            <p>1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–æ —Å –¥—Ä—É–≥–∏–º –ø–∞—Ä–æ–ª–µ–º</p>
                            <p>2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–∞—Ä–æ–ª—å</p>
                            <p>3. –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ Firebase Console</p>
                            <p>4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥—Ä—É–≥–∏–º email</p>
                        `;
                    }
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.style.display = 'block';
                    resultDiv.innerHTML = `
                        <h3>‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                        <p><strong>–ö–æ–¥ –æ—à–∏–±–∫–∏:</strong> ${error.code}</p>
                        <p><strong>–°–æ–æ–±—â–µ–Ω–∏–µ:</strong> ${error.message}</p>
                    `;
                }
            }
        });
    </script>
</body>
</html>
