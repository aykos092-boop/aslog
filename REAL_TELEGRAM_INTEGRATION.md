# ü§ñ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–æ–º

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

### **1. –î–µ–ø–ª–æ–π Telegram —Ñ—É–Ω–∫—Ü–∏–∏:**
```bash
supabase functions deploy telegram-bot
```

### **2. ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
```bash
TELEGRAM_BOT_TOKEN=8361698849:AAFl19mQYwVeUG3V0QghljXiKEz--7_Eyj8
```

### **3. Webhook –¥–ª—è –±–æ—Ç–∞:**
```bash
curl.exe -X POST "https://api.telegram.org/bot8361698849:AAFl19mQYwVeUG3V0QghljXiKEz--7_Eyj8/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://eqrzodfukdnwsogjzmoz.supabase.co/functions/v1/telegram-bot/webhook"
  }'
```

## üéØ –ö–∞–∫ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:

### **–°–µ–π—á–∞—Å (Mock):**
- –ö–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–æ–¥

### **–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (–†–µ–∞–ª—å–Ω–æ):**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä –Ω–∞ —Å–∞–π—Ç–µ
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Telegram @asloguzbot
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –£–ù–ò–ö–ê–õ–¨–ù–´–ô –∫–æ–¥ –≤ —á–∞—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–æ–¥ –≤ Telegram
- –í–≤–æ–¥–∏—Ç –∫–æ–¥ –Ω–∞ —Å–∞–π—Ç–µ (3 –ø–æ–ø—ã—Ç–∫–∏)
- ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

## üì± –†–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

### **–®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ**
```
1. –í—ã–±–∏—Ä–∞–µ—Ç —Ä–æ–ª—å: –ö–ª–∏–µ–Ω—Ç/–ü–µ—Ä–µ–≤–æ–∑—á–∏–∫
2. –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä: +998901234567
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
4. –í–∏–¥–∏—Ç: "–û—Ç–∫—Ä–æ–π—Ç–µ Telegram @asloguzbot"
```

### **–®–∞–≥ 2: Telegram –±–æ—Ç**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç: t.me/asloguzbot?start=UUID
2. –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç /start UUID
3. –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –£–ù–ò–ö–ê–õ–¨–ù–´–ô –∫–æ–¥: 28473
4. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
   "üîê –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"
   "–í–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥: 28473"
   "–ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 5 –º–∏–Ω—É—Ç"
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç
2. –í–≤–æ–¥–∏—Ç –∫–æ–¥: 28473
3. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç (3 –ø–æ–ø—ã—Ç–∫–∏)
4. ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è!
```

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–æ–¥–µ:

### **1. –ó–∞–º–µ–Ω–∏—Ç—å mock –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã:**
```typescript
// –ë—ã–ª–æ (mock):
await sendCodeToTelegram(phone, uniqueCode);

// –°—Ç–∞–Ω–µ—Ç (—Ä–µ–∞–ª—å–Ω–æ):
const response = await fetch(`${TELEGRAM_API_BASE}/send-code`, {
  method: 'POST',
  body: JSON.stringify({ phone, code: uniqueCode })
});
```

### **2. –£–±—Ä–∞—Ç—å localStorage —Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
```typescript
// –ë—ã–ª–æ (localStorage):
localStorage.setItem('mock_session', JSON.stringify(...));

// –°—Ç–∞–Ω–µ—Ç (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):
await supabase.from('telegram_sessions').insert({...});
```

### **3. –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞:**
```typescript
// –ë—ã–ª–æ (localStorage):
const session = JSON.parse(localStorage.getItem('mock_session'));

// –°—Ç–∞–Ω–µ—Ç (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö):
const { data: session } = await supabase
  .from('telegram_sessions')
  .select('*')
  .eq('session_token', sessionToken);
```

## üöÄ –î–µ–ø–ª–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### **1. SQL –º–∏–≥—Ä–∞—Ü–∏—è:**
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Supabase Dashboard
CREATE TABLE telegram_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  phone TEXT NOT NULL,
  session_token UUID NOT NULL UNIQUE,
  unique_code TEXT NOT NULL,
  expires_at TIMESTAMP WITH TIME ZONE NOT NULL,
  attempts INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

### **2. –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:**
```bash
supabase functions deploy telegram-bot
```

### **3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å webhook
curl.exe -X POST "https://api.telegram.org/bot8361698849:AAFl19mQYwVeUG3V0QghljXiKEz--7_Eyj8/setWebhook" \
  -d '{"url": "https://eqrzodfukdnwsogjzmoz.supabase.co/functions/v1/telegram-bot/webhook"}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
curl.exe -X GET "https://api.telegram.org/bot8361698849:AAFl19mQYwVeUG3V0QghljXiKEz--7_Eyj8/getWebhookInfo"
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

- ‚úÖ **–†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤** –≤ Telegram
- ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã** –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
- ‚úÖ **3 –ø–æ–ø—ã—Ç–∫–∏** –≤–≤–æ–¥–∞
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–¥—ã –Ω–µ –≤–∏–¥–Ω—ã –Ω–∞ —Å–∞–π—Ç–µ
- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å @asloguzbot

**–°–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ mock —Ä–µ–∂–∏–º–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º Telegram –±–æ—Ç–æ–º!** üöÄ
